<!DOCTYPE html>
<html lang="en">

<head>
    <title>View polls</title>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400" rel="stylesheet">
    <link href="css/styling.css" rel="stylesheet">
    <meta charset="UTF-8">

    <nav>
        <button onclick="logout()">Logout</button>
        <button onclick="location.href='dashboard.html'">Dashboard</button>
        <button onclick="location.href='view.html'">View polls</button>
        <button onclick="location.href='create.html'">Create poll</button>
    </nav>
</head>

<body>


    <div class="container">
        <h1>Create a poll</h1>

        Poll name: <br><input type="text" id="pname" name="pollname"><br>

        <div class="outerman">
            <div class="getButtons">
                <button onclick="createPoll()">Create poll</button>
            </div>
        </div>
    </div>

    <script>
        var url = "http://84.215.98.118:8080", infoHer = document.getElementById("infoHer");

        // HTTP Request
        let postFunc = async (nowUrl) => {
            console.log("button pressed");
            var name = document.getElementById("pname").value;
            var pollJson = "{ \"name\": \"" + name + "\" }";
            const response = await fetch(nowUrl, {
                method: 'POST',
                body: pollJson, // string or object
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const myJson = await response.text(); //extract JSON from the http response
            console.log(pollJson);
            return myJson;
        }

        async function createPoll() {
            var currUrl = url + "/polls",
                retVal = await postFunc(currUrl);
            console.log(retVal.value);
        }
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/http.js"></script>


</body>
</html>